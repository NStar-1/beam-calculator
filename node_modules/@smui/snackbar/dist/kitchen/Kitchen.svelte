{#if config}
  <Snackbar
    bind:this={element}
    on:SMUISnackbar:closed={handleClosed}
    labelText={config.label}
    {...(config && config.props) || {}}
    {...prefixFilter($$restProps, 'snackbar$')}
  >
    <Label {...prefixFilter($$restProps, 'label$')} />
    {#if config.actions || config.dismissButton}
      <Actions>
        {#if config.actions}
          {#each config.actions as action}
            <Button
              on:click={(event) => handleActionClick(action, event)}
              {...prefixFilter($$restProps, 'action$')}>{action.text}</Button
            >
          {/each}
        {/if}
        {#if config.dismissButton}
          <IconButton
            on:click={handleDismiss}
            title={config.dismissTitle || 'Dismiss'}
            {...prefixFilter($$restProps, 'dismiss$')}
            >{config.dismissText || 'close'}</IconButton
          >
        {/if}
      </Actions>
    {/if}
  </Snackbar>
{/if}

<script>import { prefixFilter } from '@smui/common/internal';
import { Label } from '@smui/common';
import Button from '@smui/button';
import IconButton from '@smui/icon-button';
import Snackbar from '../Snackbar.svelte';
import Actions from '../Actions.js';
let element;
let snackbars = [];
let config = undefined;
let waiting = false;
$: if (snackbars.length && !config) {
    config = snackbars[0];
    waiting = true;
}
$: if (element && waiting && !element.isOpen()) {
    element.open();
    waiting = false;
}
function handleClosed(e) {
    if (config === null || config === void 0 ? void 0 : config.onClose) {
        config.onClose(e);
    }
    snackbars.splice(0, 1);
    snackbars = snackbars;
    config = undefined;
}
function handleActionClick(action, e) {
    if (action.onClick) {
        action.onClick(e);
    }
}
function handleDismiss(e) {
    if (config === null || config === void 0 ? void 0 : config.onDismiss) {
        config.onDismiss(e);
    }
}
export function push(config) {
    snackbars.push(config);
    snackbars = snackbars;
}
export function getElement() {
    return element.getElement();
}
</script>
