<thead
  bind:this={element}
  use:useActions={use}
  use:forwardEvents
  on:SMUICheckbox:mount={(event) => (checkbox = event.detail)}
  on:SMUICheckbox:unmount={() => (checkbox = undefined)}
  on:SMUIDataTableCell:mount={handleCellMount}
  on:SMUIDataTableCell:unmount={handleCellUnmount}
  {...$$restProps}><slot /></thead
>

<script>import { onMount, setContext } from 'svelte';
import { get_current_component } from 'svelte/internal';
import { forwardEventsBuilder, useActions, dispatch, } from '@smui/common/internal';
const forwardEvents = forwardEventsBuilder(get_current_component());
// Remember to update $$Props if you add/remove/rename props.
export let use = [];
let element;
let checkbox = undefined;
let cells = [];
const cellAccessorMap = new WeakMap();
setContext('SMUI:data-table:row:header', true);
onMount(() => {
    const accessor = {
        get cells() {
            return cells;
        },
        get orderedCells() {
            return getOrderedCells();
        },
        get checkbox() {
            return checkbox;
        },
    };
    dispatch(getElement(), 'SMUIDataTableHeader:mount', accessor);
    return () => {
        dispatch(getElement(), 'SMUIDataTableHeader:unmount', accessor);
    };
});
function handleCellMount(event) {
    cells.push(event.detail);
    cellAccessorMap.set(event.detail.element, event.detail);
    event.stopPropagation();
}
function handleCellUnmount(event) {
    const idx = cells.indexOf(event.detail);
    if (idx !== -1) {
        cells.splice(idx, 1);
        cells = cells;
    }
    cellAccessorMap.delete(event.detail.element);
    event.stopPropagation();
}
function getOrderedCells() {
    return [
        ...getElement().querySelectorAll('.mdc-data-table__header-cell'),
    ]
        .map((element) => cellAccessorMap.get(element))
        .filter((accessor) => accessor && accessor._smui_data_table_header_cell_accessor);
}
export function getElement() {
    return element;
}
</script>
