<tr
  bind:this={element}
  use:useActions={use}
  use:forwardEvents
  class={classMap({
    [className]: true,
    'mdc-data-table__header-row': header,
    'mdc-data-table__row': !header,
    'mdc-data-table__row--selected': !header && checkbox && checkbox.checked,
    ...internalClasses,
  })}
  on:click={(event) =>
    header ? notifyHeaderClick(event) : notifyRowClick(event)}
  on:SMUICheckbox:mount={(event) => (checkbox = event.detail)}
  on:SMUICheckbox:unmount={() => (checkbox = undefined)}
  aria-selected={checkbox ? (checkbox.checked ? 'true' : 'false') : undefined}
  {...internalAttrs}
  {...$$restProps}><slot /></tr
>

<script context="module">"use strict";
let counter = 0;
</script>

<script>import { onMount, getContext } from 'svelte';
import { get_current_component } from 'svelte/internal';
import { forwardEventsBuilder, classMap, useActions, dispatch, } from '@smui/common/internal';
const forwardEvents = forwardEventsBuilder(get_current_component());
// Remember to update $$Props if you add/remove/rename props.
export let use = [];
let className = '';
export { className as class };
export let rowId = 'SMUI-data-table-row-' + counter++;
let element;
let checkbox = undefined;
let internalClasses = {};
let internalAttrs = {};
let header = getContext('SMUI:data-table:row:header');
onMount(() => {
    const accessor = header
        ? {
            _smui_data_table_row_accessor: false,
            get element() {
                return getElement();
            },
            get checkbox() {
                return checkbox;
            },
            get rowId() {
                return undefined;
            },
            get selected() {
                var _a;
                return (_a = (checkbox && checkbox.checked)) !== null && _a !== void 0 ? _a : false;
            },
            addClass,
            removeClass,
            getAttr,
            addAttr,
        }
        : {
            _smui_data_table_row_accessor: true,
            get element() {
                return getElement();
            },
            get checkbox() {
                return checkbox;
            },
            get rowId() {
                return rowId;
            },
            get selected() {
                var _a;
                return (_a = (checkbox && checkbox.checked)) !== null && _a !== void 0 ? _a : false;
            },
            addClass,
            removeClass,
            getAttr,
            addAttr,
        };
    dispatch(getElement(), 'SMUIDataTableRow:mount', accessor);
    return () => {
        dispatch(getElement(), 'SMUIDataTableRow:unmount', accessor);
    };
});
function addClass(className) {
    if (!internalClasses[className]) {
        internalClasses[className] = true;
    }
}
function removeClass(className) {
    if (!(className in internalClasses) || internalClasses[className]) {
        internalClasses[className] = false;
    }
}
function getAttr(name) {
    var _a;
    return name in internalAttrs
        ? (_a = internalAttrs[name]) !== null && _a !== void 0 ? _a : null
        : getElement().getAttribute(name);
}
function addAttr(name, value) {
    if (internalAttrs[name] !== value) {
        internalAttrs[name] = value;
    }
}
function notifyHeaderClick(event) {
    dispatch(getElement(), 'SMUIDataTableHeader:click', event);
}
function notifyRowClick(event) {
    dispatch(getElement(), 'SMUIDataTableRow:click', {
        rowId,
        target: event.target,
    });
}
export function getElement() {
    return element;
}
</script>
