<i
  bind:this={element}
  use:useActions={use}
  use:forwardEvents
  class={classMap({
    [className]: true,
    'mdc-text-field__icon': true,
    'mdc-text-field__icon--leading': leading,
    'mdc-text-field__icon--trailing': !leading,
  })}
  {tabindex}
  aria-hidden={tabindex === -1 ? 'true' : 'false'}
  aria-disabled={role === 'button' ? (disabled ? 'true' : 'false') : undefined}
  {role}
  {...internalAttrs}
  {...$$restProps}
  >{#if content == null}<slot />{:else}{content}{/if}</i
>

<script>import { MDCTextFieldIconFoundation } from '@material/textfield';
import { onMount, getContext } from 'svelte';
import { get_current_component } from 'svelte/internal';
import { forwardEventsBuilder, classMap, useActions, dispatch, } from '@smui/common/internal';
const forwardEvents = forwardEventsBuilder(get_current_component());
// Remember to update $$Props if you add/remove/rename props.
export let use = [];
let className = '';
export { className as class };
export let role = undefined;
export let tabindex = role === 'button' ? 0 : -1;
export let disabled = false;
let element;
let instance;
let internalAttrs = {};
const leadingStore = getContext('SMUI:textfield:icon:leading');
const leading = $leadingStore;
let content = undefined;
onMount(() => {
    instance = new MDCTextFieldIconFoundation({
        getAttr,
        setAttr: addAttr,
        removeAttr,
        setContent: (value) => {
            content = value;
        },
        registerInteractionHandler: (evtType, handler) => getElement().addEventListener(evtType, handler),
        deregisterInteractionHandler: (evtType, handler) => getElement().removeEventListener(evtType, handler),
        notifyIconAction: () => dispatch(getElement(), 'SMUITextField:icon', undefined, undefined, true),
    });
    dispatch(getElement(), leading
        ? 'SMUITextfieldLeadingIcon:mount'
        : 'SMUITextfieldTrailingIcon:mount', instance);
    instance.init();
    return () => {
        dispatch(getElement(), leading
            ? 'SMUITextfieldLeadingIcon:unmount'
            : 'SMUITextfieldTrailingIcon:unmount', instance);
        instance.destroy();
    };
});
function getAttr(name) {
    var _a;
    return name in internalAttrs
        ? (_a = internalAttrs[name]) !== null && _a !== void 0 ? _a : null
        : getElement().getAttribute(name);
}
function addAttr(name, value) {
    if (internalAttrs[name] !== value) {
        internalAttrs[name] = value;
    }
}
function removeAttr(name) {
    if (!(name in internalAttrs) || internalAttrs[name] != null) {
        internalAttrs[name] = undefined;
    }
}
export function getElement() {
    return element;
}
</script>
